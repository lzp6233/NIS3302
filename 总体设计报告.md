# 项目总体设计报告
项目名称：网络端口扫描系统
姓名学号学院：
刘梓芃 523031910639 计算机学院
聂鸣涛 523031910728 计算机学院
李卓恒 523031910556 计算机学院
张煜哲
完成日期：2025.7.

## 1 系统需求分析
### 1.1 需求分析
网络端口扫描系统旨在通过多种扫描技术，探测目标主机的存活状态以及端口开放情况，为网络安全评估和管理提供依据。该系统需要能够准确、高效地完成扫描任务，并以友好的方式呈现扫描结果，满足用户对网络状态监测的需求。
### 1.2 总体功能要求
- 实现 ICMP 扫描功能，使用 ICMP Echo（即 ICMP Request 数据包，类似 ping 命令）判断主机是否开机。
- 实现 TCP 端口扫描功能，包括 TCP connect、TCP SYN 和 TCP FIN 三种扫描方式，对目标主机的端口进行扫描，以 SSH 端口、FTP 端口扫描为例进行展示，并能分析这三种扫描方式的特点。
- 具备功能扩展能力，可使用其他协议（如 UDP）进行端口扫描，或参考现有端口扫描工具的功能进行扩展。
- 能够扫描到特定网络可能开启的应用服务。
- 拥有友好的用户界面，方便用户进行操作和查看扫描结果。
### 1.3 软件开发平台要求
使用 C、C++编程语言，借助 WinPcap、SharpPcap、LibPcap、Libnet 等类库进行开发。
### 1.4 运行环境要求
支持linux操作系统。

## 2 计划进度安排

## 3 系统总体架构
### 3.1 平台架构
本系统采用分层架构设计，由下至上分为三个层次：

#### 3.1.1 网络接口层：
- 基于Libpcap库实现原始数据包捕获
- 通过Libnet库实现原始数据包构造与发送
- 支持以太网帧、IP数据包、TCP/UDP/ICMP协议的底层处理

#### 3.1.2 核心扫描引擎层：
- ICMP扫描模块：实现主机存活检测
- TCP扫描模块：集成connect()、SYN、FIN三种扫描方式
- UDP扫描模块（扩展功能）：实现UDP端口探测
- 使用BSD Socket API实现扫描算法逻辑
​
#### 3.1.3 用户界面层：
- 命令行界面(CLI)：提供基础扫描功能
- 图形界面(GUI)：采用html框架开发可视化操作界面
- 结果展示模块：支持表格/图表形式呈现扫描结果
### 3.2 总体架构

本系统采用模块化设计，通过分层解耦实现高内聚低耦合，各组件间的协作关系如下图所示：

+-----------------------+
|     用户界面层         |
|  +------------------+ |
|  |    图形界面      | | (HTML/JavaScript)
|  |    (GUI)        | |
|  +--------+---------+ |
|  |    命令行界面     | | (CLI)
|  |      (CLI)      | |
|  +--------+---------+ |
+-----------|-----------+
            | (用户指令/扫描结果)
+-----------v-----------+
|     核心扫描引擎层     |
|  +------------------+ |
|  |   ICMP扫描模块   | | <---+
|  +--------+---------+ |     |
|  |   TCP扫描模块    | |     | (扫描策略)
|  | (connect/SYN/FIN)| |     |
|  +--------+---------+ |     |
|  |   UDP扫描模块    | |     |
|  +--------+---------+ |     |
|  | 扫描任务调度器   | >-----+
|  +--------+---------+ |
+-----------|-----------+
            | (原始数据包)
+-----------v-----------+
|     网络接口层        |
|  +------------------+ |
|  |     Libpcap      | | (抓包)
|  +--------+---------+ |
|  |     Libnet       | | (发包)
|  +--------+---------+ |
|  | BSD Socket API   | | (基础通信)
|  +------------------+ |
+-----------------------+
#### 3.2.1 核心组件交互流程
- 用户指令传递：
    GUI/CLI接收用户输入的扫描目标（IP/端口范围）
    通过JSON-RPC协议将任务参数传递给扫描任务调度器
- 扫描任务调度
- 网络探测执行：
    ICMP扫描：通过Libnet构造Echo Request，Libpcap捕获Reply
    Connect扫描：调用BSD Socket的connect()
    SYN扫描：通过Libnet构造SYN包，Libpcap过滤SYN-ACK/RST
    UDP扫描：发送定制UDP包，检测ICMP Port Unreachable
- 结果处理与返回

#### 3.2.2 数据流模型
- 指令下行流
GUI事件 -> JSON序列化 -> 任务队列 -> 扫描引擎 -> Libnet/Libpcap
- 数据上行流
抓包线程 -> 协议解析 -> 结果聚合 -> 反序列化 -> GUI渲染
- 错误处理流
异常捕获 -> 日志记录(rsyslog) -> 用户告警弹窗

总的来说，该架构通过明确的层次边界和标准化接口，实现了扫描功能的高效执行与灵活扩展。

## 4 系统功能模块1

## 5 系统功能模块2

## 6 运行平台
## 7 接口设计
## 8 系统出错处理设计